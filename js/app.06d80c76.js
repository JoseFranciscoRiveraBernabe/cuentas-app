(function(e){function t(t){for(var r,i,s=t[0],c=t[1],l=t[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(p.length)p.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],r=!0,s=1;s<a.length;s++){var c=a[s];0!==o[c]&&(r=!1)}r&&(n.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},o={app:0},n=[];function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="./";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},"2a56":function(e,t,a){e.exports=a.p+"img/pinto.abe80838.jpg"},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"container"},[a("router-view")],1)])},n=[],i={name:"app"},s=i,c=(a("034f"),a("2877")),l=Object(c["a"])(s,o,n,!1,null,null,null),u=l.exports,d=(a("5363"),a("289d")),p=(a("5abe"),a("b0c0"),a("8c4f")),b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-tabs",{attrs:{type:"is-boxed",position:"is-centered"},model:{value:e.tabActiva,callback:function(t){e.tabActiva=t},expression:"tabActiva"}},[a("b-tab-item",{attrs:{icon:"wallet-plus",label:""}},[a("agregar-movimiento")],1),a("b-tab-item",{attrs:{icon:"wallet-outline",label:""}},[a("movimientos")],1),a("b-tab-item",{attrs:{icon:"archive",label:""}},[a("categorias")],1),a("b-tab-item",{attrs:{icon:"cart-variant",label:""}},[a("compras")],1),a("b-tab-item",{attrs:{icon:"logout"}},[a("section",{staticClass:"section"},[a("h3",{staticClass:"is-size-3"},[e._v("Cerrando sesión...")]),a("b-loading",{attrs:{"is-full-page":!1,active:!0}})],1)])],1)},m=[],f=a("1da1"),g=(a("96cf"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",{staticClass:"has-text-weight-bold is-size-5 has-text-centered"},[e._v("Categorías")]),a("div",{staticClass:"buttons is-centered"},[a("b-button",{attrs:{type:"is-primary","icon-left":"plus"},on:{click:e.agregar}},[e._v(" Agregar ")])],1),a("section",[a("b-table",{attrs:{data:e.categorias,loading:e.cargando}},[a("b-table-column",{attrs:{field:"nombre",label:"Nombre",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.nombre)+" ")]}}])}),a("b-table-column",{attrs:{field:"tipo",label:"Tipo",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return["INGRESO"===t.row.tipo?a("b-tag",{attrs:{type:"is-success"}},[e._v(e._s(t.row.tipo))]):e._e(),"EGRESO"===t.row.tipo?a("b-tag",{attrs:{type:"is-danger"}},[e._v(e._s(t.row.tipo))]):e._e()]}}])}),a("b-table-column",{attrs:{field:"periodo",label:"Periodo",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.periodo)+" ")]}}])}),a("b-table-column",{attrs:{field:"id",label:"Eliminar"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("b-button",{staticClass:"mb-1",attrs:{type:"is-danger"},on:{click:function(a){return e.eliminar(t.row,t.index)}}},[a("b-icon",{attrs:{icon:"delete"}})],1)]}}])})],1)],1)])}),h=[],v=(a("a434"),a("d3b7"),a("159b"),a("e71f")),w=(a("25f0"),a("260b")),_=a("aced"),x=!0,C={obtener:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t,a,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t={apiKey:"AIzaSyBws1QLXDlqj94P7dEiaBL2ReefnNCd_bo",authDomain:"control-cuentas-app.firebaseapp.com",databaseURL:"https://control-cuentas-app-default-rtdb.firebaseio.com",projectId:"control-cuentas-app",storageBucket:"control-cuentas-app.appspot.com",messagingSenderId:"516453600809",appId:"1:516453600809:web:5aea9be1371490af031638"},a=Object(w["a"])(t),r=Object(v["h"])(a),e.next=5;break;case 5:if(!x){e.next=7;break}return e.abrupt("return",r);case 7:return e.prev=7,e.next=10,Object(v["e"])(r);case 10:_["a"].open({message:"Modo fuera de línea habilitado correctamente",type:"is-success"}),x=!0,e.next=21;break;case 14:e.prev=14,e.t0=e["catch"](7),console.log({err:e.t0}),o="","failed-precondition"==e.t0.code?o="Error: recuerda no tener varias pestañas abiertas con la app":"unimplemented"==e.t0.code&&(o="Error: el navegador que usas no soporta el modo fuera de línea. Cambia de navegador"),o+=" "+e.t0.toString(),_["a"].open({message:o,type:"is-danger"});case 21:return e.abrupt("return",r);case 22:case"end":return e.stop()}}),e,null,[[7,14]])})));function t(){return e.apply(this,arguments)}return t}(),obtenerColeccionCategorias:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=v["b"],e.next=3,C.obtener();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1,"categorias"));case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),obtenerColeccionMovimientos:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=v["b"],e.next=3,C.obtener();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1,"movimientos"));case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),obtenerColeccionCompras:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=v["b"],e.next=3,C.obtener();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1,"compras"));case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},y=C,O=a("2909"),k=(a("99af"),{obtenerCategorias:function(){return Object(f["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=v["g"],e.next=3,y.obtenerColeccionCategorias();case 3:return e.t1=e.sent,e.next=6,(0,e.t0)(e.t1);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))()},ObtenerCategoriasIngresos:function(){return Object(f["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y.obtenerColeccionCategorias();case 2:return t=e.sent,a=Object(v["j"])(t,Object(v["l"])("tipo","==","INGRESO")),e.next=6,Object(v["g"])(a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))()},ObtenerCategoriasEgresos:function(){return Object(f["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y.obtenerColeccionCategorias();case 2:return t=e.sent,a=Object(v["j"])(t,Object(v["l"])("tipo","==","EGRESO")),e.next=6,Object(v["g"])(a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))()},obtenerCategoriasUsandoConsultas:function(e,t){return Object(f["a"])(regeneratorRuntime.mark((function a(){var r,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,y.obtenerColeccionCategorias();case 2:r=a.sent,o=v["j"].apply(void 0,[r].concat(Object(O["a"])(e))),Object(v["i"])(o,t);case 5:case"end":return a.stop()}}),a)})))()}}),j=k,S={data:function(){return{categorias:[],cargando:!1,coleccionCategorias:[],bd:null,columns:[{field:"nombre",label:"Nombre",searchable:!0},{field:"tipo",label:"Tipo",searchable:!0},{field:"periodo",label:"Periodo",searchable:!0}]}},mounted:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,y.obtener();case 2:e.bd=t.sent,e.obtener();case 4:case"end":return t.stop()}}),t)})))()},methods:{eliminar:function(e,t){var a=this;this.$buefy.dialog.confirm({title:"¿Quitar categoría?",message:"Al hacerlo no podrás continuar usándola.",confirmText:"Sí, quitar",cancelText:"Cancelar",type:"is-danger",hasIcon:!0,onConfirm:function(){var r=Object(f["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a.cargando=!0,r.t0=v["c"],r.t1=v["d"],r.next=5,y.obtener();case 5:return r.t2=r.sent,r.t3=e.id,r.t4=(0,r.t1)(r.t2,"categorias",r.t3),r.next=10,(0,r.t0)(r.t4);case 10:a.categorias.splice(t,1),a.cargando=!1;case 12:case"end":return r.stop()}}),r)})));function o(){return r.apply(this,arguments)}return o}()})},agregar:function(){this.$router.push({name:"AgregarCategoria"})},obtener:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.cargando=!0,t.next=3,j.obtenerCategorias();case 3:a=t.sent,e.categorias=[],a.forEach((function(t){e.categorias.push({id:t.id,nombre:t.data().nombre,tipo:t.data().tipo,periodo:t.data().periodo})})),e.cargando=!1;case 7:case"end":return t.stop()}}),t)})))()}}},R=S,E=Object(c["a"])(R,g,h,!1,null,null,null),P=E.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",{staticClass:"has-text-weight-bold is-size-3 has-text-centered"},[e._v("Agregar")]),a("div",{staticClass:"columns is-desktop"},[a("div",{staticClass:"column"},[a("b-field",{attrs:{label:"Tipo","label-position":e.labelPosition}},[a("b-select",{nativeOn:{change:function(t){return e.buscarCategorias(t)}},model:{value:e.movimiento.tipo,callback:function(t){e.$set(e.movimiento,"tipo",t)},expression:"movimiento.tipo"}},[a("option",{attrs:{value:"",selected:"",disabled:""}},[e._v("Selecciona")]),a("option",{attrs:{value:"INGRESO"}},[e._v("Ingreso")]),a("option",{attrs:{value:"EGRESO"}},[e._v("Egreso")])])],1),a("b-field",{attrs:{label:"Categoría","label-position":e.labelPosition}},[a("b-select",{model:{value:e.movimiento.categoria,callback:function(t){e.$set(e.movimiento,"categoria",t)},expression:"movimiento.categoria"}},[a("option",{attrs:{value:"SIN CATEGORIA",selected:""}},[e._v("Sin categoría")]),e._l(e.categorias,(function(t){return a("option",{key:t.id,domProps:{value:t.nombre}},[e._v(e._s(t.nombre))])}))],2)],1),a("b-field",{attrs:{label:"Descripción","label-position":e.labelPosition}},[a("b-input",{attrs:{maxlength:"200",type:"textarea"},model:{value:e.movimiento.descripcion,callback:function(t){e.$set(e.movimiento,"descripcion",t)},expression:"movimiento.descripcion"}})],1),a("b-field",{attrs:{label:"Total","label-position":e.labelPosition}},[a("b-input",{attrs:{type:"number"},model:{value:e.movimiento.total,callback:function(t){e.$set(e.movimiento,"total",t)},expression:"movimiento.total"}})],1)],1),a("div",{staticClass:"column"},[a("b-datepicker",{attrs:{inline:""},model:{value:e.movimiento.fecha,callback:function(t){e.$set(e.movimiento,"fecha",t)},expression:"movimiento.fecha"}})],1)]),e.errores.length>0?a("b-notification",{attrs:{type:"is-danger","has-icon":"","aria-close-label":"Close notification",role:"alert"}},[a("ul",e._l(e.errores,(function(t){return a("li",{key:t},[e._v(e._s(t))])})),0)]):e._e(),a("div",{staticClass:"buttons is-centered are-medium"},[a("b-button",{attrs:{type:"is-primary",loading:e.cargando},on:{click:e.guardar}},[e._v("Agregar")]),a("b-button",{on:{click:e.cancelar}},[e._v("Cancelar")])],1)],1)},A=[],$={name:"Movimientos",data:function(){return{mensaje:"Welcome to Your Vue.js App",labelPosition:"on-border",movimiento:{tipo:"",categoria:"",descripcion:"",total:"",fecha:null},categorias:[],errores:[],coleccionMovimientos:[],cargando:!1}},mounted:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,y.obtenerColeccionMovimientos();case 2:e.coleccionMovimientos=t.sent;case 3:case"end":return t.stop()}}),t)})))()},methods:{cancelar:function(){this.movimiento.tipo="",this.movimiento.descripcion="",this.movimiento.categoria="",this.movimiento.total="",this.movimiento.fecha=null},guardar:function(){var e=this.validarDatos();if(e){this.cargando=!0,this.movimiento.fecha=this.movimiento.fecha?this.movimiento.fecha:new Date,this.movimiento.fecha.setHours(0,0,0,0),this.movimiento.fecha=this.movimiento.fecha.getTime();var t=Object.assign({},this.movimiento);Object.assign(t,this.movimiento),Object(v["a"])(this.coleccionMovimientos,t),this.$buefy.toast.open("Registro correcto"),this.movimiento.tipo="",this.movimiento.descripcion="",this.movimiento.categoria="",this.movimiento.total="",this.movimiento.fecha=null,this.cargando=!1}},validarDatos:function(){return!!(this.movimiento.tipo&&this.movimiento.categoria&&this.movimiento.total)||(this.errores=[],this.movimiento.tipo||this.errores.push("Debes seleccionar el tipo de movimiento."),this.movimiento.categoria||this.errores.push("Debes seleccionar la categoría."),this.movimiento.total||this.errores.push("Debes colocar el total."),!1)},buscarCategorias:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function a(){var r,o,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.categorias=[],r=e.target.value,"INGRESO"!==r){a.next=7;break}return a.next=5,j.ObtenerCategoriasIngresos();case 5:o=a.sent,t.poblarArrayCategorias(o);case 7:if("EGRESO"!==r){a.next=12;break}return a.next=10,j.ObtenerCategoriasEgresos();case 10:n=a.sent,t.poblarArrayCategorias(n);case 12:console.log(t.categorias);case 13:case"end":return a.stop()}}),a)})))()},poblarArrayCategorias:function(e){var t=this;e.forEach((function(e){t.categorias.push({id:e.id,nombre:e.data().nombre,tipo:e.data().tipo,periodo:e.data().periodo})}))}}},D=$,M=Object(c["a"])(D,I,A,!1,null,null,null),T=M.exports,F=a("6a7c"),N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",{staticClass:"has-text-weight-bold is-size-5 has-text-centered"},[e._v(" Ingresos y Egresos "),a("br"),e.opcion.dia?a("span",[e._v(e._s(e._f("convertirAFecha")(e.hoy)))]):e._e(),e.opcion.semana||e.opcion.mes?a("span",[e._v(" Del "+e._s(e._f("convertirAFecha")(e.diaInicioSemana))+" al "+e._s(e._f("convertirAFecha")(e.diaFinSemana))+" ")]):e._e(),e.opcion.periodo?a("span",[e._v(" Del "+e._s(e._f("convertirAFecha")(e.inicioPeriodo))+" al "+e._s(e._f("convertirAFecha")(e.finPeriodo))+" ")]):e._e()]),a("div",{staticClass:"buttons has-addons is-centered"},[a("b-button",{attrs:{type:{"is-info is-selected":e.opcion.dia}},on:{click:function(t){return e.obtenerMovimientos("dia")}}},[e._v(" HOY ")]),a("b-button",{attrs:{type:{"is-info is-selected":e.opcion.semana}},on:{click:function(t){return e.obtenerMovimientos("semana")}}},[e._v(" SEMANA ")]),a("b-button",{attrs:{type:{"is-info is-selected":e.opcion.mes}},on:{click:function(t){return e.obtenerMovimientos("mes")}}},[e._v(" MES ")]),a("b-button",{attrs:{type:{"is-info is-selected":e.opcion.periodo}}},[e._v(" PERIODO ")])],1),a("div",{staticClass:"columns is-desktop"},[a("div",{staticClass:"column"},[a("b-field",{attrs:{label:"Buscar desde"}},[a("b-datepicker",{attrs:{placeholder:"Selecciona..."},model:{value:e.inicioPeriodo,callback:function(t){e.inicioPeriodo=t},expression:"inicioPeriodo"}},[a("b-button",{attrs:{label:"Hoy",type:"is-primary","icon-left":"calendar-today"},on:{click:function(t){e.inicioPeriodo=new Date}}}),a("b-button",{attrs:{label:"Borrar",type:"is-danger","icon-left":"close",outlined:""},on:{click:function(t){e.inicioPeriodo=null}}})],1)],1)],1),a("div",{staticClass:"column"},[a("b-field",{attrs:{label:"Buscar hasta"}},[a("b-datepicker",{attrs:{placeholder:"Selecciona..."},model:{value:e.finPeriodo,callback:function(t){e.finPeriodo=t},expression:"finPeriodo"}},[a("b-button",{attrs:{label:"Hoy",type:"is-primary","icon-left":"calendar-today"},on:{click:function(t){e.finPeriodo=new Date}}}),a("b-button",{attrs:{label:"Borrar",type:"is-danger","icon-left":"close",outlined:""},on:{click:function(t){e.finPeriodo=null}}})],1)],1)],1),a("div",{staticClass:"column is-1"},[a("br"),a("b-button",{attrs:{type:"is-primary","icon-left":"feature-search-outline"},on:{click:function(t){return e.obtenerMovimientos("periodo")}}},[e._v("Buscar")])],1)]),a("p",{staticClass:"title has-text-weight-bold is-1 has-text-centered"},[e._v("$"+e._s(parseFloat(e.total.ingresos-e.total.egresos)))]),a("div",{staticClass:"columns is-desktop"},[a("div",{staticClass:"column"},[a("div",{staticClass:"columns is-desktop has-text-centered"},[a("div",{staticClass:"column"},[a("div",{staticClass:"notification is-success is-light"},[a("p",{staticClass:"title is-3 has-text-weight-bold"},[a("b-icon",{attrs:{icon:"cash-plus",size:"is-large",type:"is-success"}}),e._v(" $"+e._s(e.total.ingresos)+" ")],1),e.categorias.ingresos.length>0?a("div",{staticClass:"box"},[a("b-table",{attrs:{data:e.categorias.ingresos,loading:e.cargando}},[a("b-table-column",{attrs:{field:"props.row.nombre",label:"Categoría"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.nombre)+" ")]}}],null,!1,3843434756)}),a("b-table-column",{attrs:{field:"props.row.total",label:"Total"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" $"+e._s(t.row.total)+" ")]}}],null,!1,158226875)})],1)],1):e._e()])]),a("div",{staticClass:"column"},[a("div",{staticClass:"notification is-danger is-light"},[a("p",{staticClass:"title is-3 has-text-weight-bold"},[a("b-icon",{attrs:{icon:"cash-minus",size:"is-large",type:"is-danger"}}),e._v(" $"+e._s(e.total.egresos)+" ")],1),e.categorias.egresos.length>0?a("div",{staticClass:"box"},[a("b-table",{attrs:{data:e.categorias.egresos,loading:e.cargando}},[a("b-table-column",{attrs:{field:"props.row.nombre",label:"Categoría",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.nombre)+" ")]}}],null,!1,3843434756)}),a("b-table-column",{attrs:{field:"props.row.total",label:"Total",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" $"+e._s(t.row.total)+" ")]}}],null,!1,158226875)})],1)],1):e._e()])])])])]),a("b-select",{attrs:{disabled:!e.isPaginated},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}},[a("option",{attrs:{value:"5"}},[e._v("5 por página")]),a("option",{attrs:{value:"10"}},[e._v("10 por página")]),a("option",{attrs:{value:"15"}},[e._v("15 por página")]),a("option",{attrs:{value:"20"}},[e._v("20 por página")])]),a("section",[a("b-table",{attrs:{data:e.movimientos,paginated:e.isPaginated,"per-page":e.perPage,"current-page":e.currentPage,"pagination-position":e.paginationPosition,"default-sort-direction":e.defaultSortDirection,"pagination-rounded":e.isPaginationRounded,"sort-icon":e.sortIcon,"sort-icon-size":e.sortIconSize,"aria-next-label":"Siguiente","aria-previous-label":"Anterior","aria-page-label":"Página","aria-current-label":"Actual",loading:e.cargando},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}},[a("b-table-column",{attrs:{field:"props.row.fecha",label:"Fecha",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("convertirAFecha")(t.row.fecha))+" ")]}}])}),a("b-table-column",{attrs:{field:"props.row.descripcion",label:"Descripción",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.descripcion)+" ")]}}])}),a("b-table-column",{attrs:{field:"props.row.total",label:"Total",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.total)+" ")]}}])}),a("b-table-column",{attrs:{field:"props.row.tipo",label:"Tipo",sortable:"",centered:""},scopedSlots:e._u([{key:"default",fn:function(t){return["INGRESO"===t.row.tipo?a("b-tag",{attrs:{type:"is-success"}},[e._v(e._s(t.row.tipo))]):e._e(),"EGRESO"===t.row.tipo?a("b-tag",{attrs:{type:"is-danger"}},[e._v(e._s(t.row.tipo))]):e._e()]}}])}),a("b-table-column",{attrs:{label:"Categoría"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.categoria)+" ")]}}])}),a("b-table-column",{attrs:{field:"id",label:"Eliminar"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("b-button",{staticClass:"mb-1",attrs:{type:"is-warning"},on:{click:function(a){return e.eliminar(t.row)}}},[a("b-icon",{attrs:{icon:"delete"}})],1)]}}])})],1)],1)],1)},G=[],q=a("b85c"),z=(a("4de4"),a("c740"),a("d81d"),{obtenerMovimientosHoy:function(e){return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,y.obtenerColeccionMovimientos();case 2:return a=t.sent,r=Object(v["j"])(a,Object(v["l"])("fecha","==",e)),t.next=6,Object(v["g"])(r);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))()},ObtenerCategoriasIngresos:function(){return Object(f["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y.obtenerColeccionCategorias();case 2:return t=e.sent,a=Object(v["j"])(t,Object(v["l"])("tipo","==","INGRESO")),e.next=6,Object(v["g"])(a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))()},obtenerMovimientos:function(e,t){return Object(f["a"])(regeneratorRuntime.mark((function a(){var r,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,y.obtenerColeccionMovimientos();case 2:r=a.sent,o=v["j"].apply(void 0,[r].concat(Object(O["a"])(e))),Object(v["i"])(o,t);case 5:case"end":return a.stop()}}),a)})))()}}),L=z;r["a"].filter("convertirAFecha",(function(e){if(!e)return"";var t=new Date(e),a=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],r=t.getFullYear(),o=a[t.getMonth()],n=t.getDate(),i=o+" "+n+", "+r;return i}));var H={data:function(){return{isPaginated:!0,isPaginationRounded:!0,paginationPosition:"bottom",defaultSortDirection:"asc",sortIcon:"arrow-up",sortIconSize:"is-small",currentPage:1,perPage:10,consultas:[],movimientos:[],bd:null,opcion:{dia:!0,semana:!1,mes:!1,periodo:!1},total:{ingresos:0,egresos:0},hoy:null,diaInicioSemana:null,diaFinSemana:null,categorias:{ingresos:[],egresos:[]},cargando:!1,inicioPeriodo:null,finPeriodo:null}},created:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.obtenerMovimientos();case 2:e.hoy=new Date,e.hoy.setHours(0,0,0,0),e.hoy=e.hoy.getTime(),e.consultas.push(Object(v["l"])("fecha","==",e.hoy));case 6:case"end":return t.stop()}}),t)})))()},methods:{obtenerMovimientos:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function a(){var r,o,n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.movimientos=[],t.cargando=!0,"dia"===e&&(t.consultas=[],t.opcion.dia=!0,t.opcion.semana=!1,t.opcion.mes=!1,t.opcion.periodo=!1,t.consultas.push(Object(v["l"])("fecha","==",t.hoy))),"semana"===e&&(t.consultas=[],t.opcion.dia=!1,t.opcion.semana=!0,t.opcion.mes=!1,t.opcion.periodo=!1,r=new Date,t.diaInicioSemana=new Date(r.setDate(r.getDate()-r.getDay())),t.diaFinSemana=new Date(r.setDate(r.getDate()-r.getDay()+6)),t.diaInicioSemana.setHours(0,0,0,0),t.diaInicioSemana=t.diaInicioSemana.getTime(),t.diaFinSemana.setHours(0,0,0,0),t.diaFinSemana=t.diaFinSemana.getTime(),t.consultas.push(Object(v["l"])("fecha",">=",t.diaInicioSemana)),t.consultas.push(Object(v["l"])("fecha","<=",t.diaFinSemana))),"mes"===e&&(t.consultas=[],t.opcion.dia=!1,t.opcion.semana=!1,t.opcion.mes=!0,t.opcion.periodo=!1,o=new Date,t.diaInicioSemana=new Date(o.getFullYear(),o.getMonth(),1),t.diaFinSemana=new Date(o.getFullYear(),o.getMonth()+1,0),t.diaInicioSemana.setHours(0,0,0,0),t.diaInicioSemana=t.diaInicioSemana.getTime(),t.diaFinSemana.setHours(0,0,0,0),t.diaFinSemana=t.diaFinSemana.getTime(),t.consultas.push(Object(v["l"])("fecha",">=",t.diaInicioSemana)),t.consultas.push(Object(v["l"])("fecha","<=",t.diaFinSemana))),"periodo"!==e){a.next=23;break}if(null!==t.inicioPeriodo&&null!==t.finPeriodo){a.next=10;break}return t.$buefy.toast.open("Selecciona las fechas"),t.cargando=!1,a.abrupt("return");case 10:t.consultas=[],t.opcion.dia=!1,t.opcion.semana=!1,t.opcion.mes=!1,t.opcion.periodo=!0,n=t.inicioPeriodo,i=t.finPeriodo,n.setHours(0,0,0,0),n=n.getTime(),i.setHours(0,0,0,0),i=i.getTime(),t.consultas.push(Object(v["l"])("fecha",">=",n)),t.consultas.push(Object(v["l"])("fecha","<=",i));case 23:L.obtenerMovimientos(t.consultas,(function(e){var a,r=e.docChanges(),o=Object(q["a"])(r);try{for(o.s();!(a=o.n()).done;){var n=a.value,i=n.doc.data(),s=n.doc.id;if("added"===n.type&&(i.id=s,t.movimientos.push(i)),"modified"===n.type&&console.log("Elemento modificado"),"removed"===n.type){var c=t.indiceMovimiento(s);-1!==c&&t.movimientos.splice(c,1)}}}catch(d){o.e(d)}finally{o.f()}t.calcularTotal();var l=t.filtrarCategorias(t.movimientos,"INGRESO"),u=t.filtrarCategorias(t.movimientos,"EGRESO");t.categorias.ingresos=t.crearObjetosCategorias(l),t.categorias.egresos=t.crearObjetosCategorias(u),t.calcularTotalCategorias(),console.log(t.movimientos)})),t.cargando=!1;case 25:case"end":return a.stop()}}),a)})))()},indiceMovimiento:function(e){return this.movimientos.findIndex((function(t){return t.id===e}))},eliminar:function(e){var t=this;this.$buefy.dialog.confirm({title:"¿Seguro que deseas eliminar?",message:"Al hacerlo, el movimiento se borrará y podría afectar los totales.",confirmText:"Sí, quitar",cancelText:"Cancelar",type:"is-danger",hasIcon:!0,onConfirm:function(){var a=Object(f["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.cargando=!0,a.t0=v["c"],a.t1=v["d"],a.next=5,y.obtener();case 5:return a.t2=a.sent,a.t3=e.id,a.t4=(0,a.t1)(a.t2,"movimientos",a.t3),a.next=10,(0,a.t0)(a.t4);case 10:t.cargando=!1;case 11:case"end":return a.stop()}}),a)})));function r(){return a.apply(this,arguments)}return r}()})},filtrarCategorias:function(e,t){var a=e.map((function(e){if(e.tipo===t)return e.categoria}));return a.filter((function(e,t){return a.indexOf(e)===t}))},crearObjetosCategorias:function(e){var t=[];return e.forEach((function(e){e&&t.push({nombre:e,total:0})})),t},calcularTotalCategorias:function(){var e=this.movimientos,t=this.categorias.ingresos,a=this.categorias.egresos;e.forEach((function(e){t.forEach((function(t){t.nombre===e.categoria&&"INGRESO"===e.tipo&&(t.total+=parseFloat(e.total))}))})),e.forEach((function(e){a.forEach((function(t){t.nombre===e.categoria&&"EGRESO"===e.tipo&&(t.total+=parseFloat(e.total))}))})),this.categorias.ingresos=t,this.categorias.egresos=a},calcularTotal:function(){var e=0,t=0;for(var a in this.movimientos)"INGRESO"===this.movimientos[a].tipo&&(e+=parseFloat(this.movimientos[a].total)),"EGRESO"===this.movimientos[a].tipo&&(t+=parseFloat(this.movimientos[a].total));this.total.ingresos=e,this.total.egresos=t}}},B=H,Y=Object(c["a"])(B,N,G,!1,null,null,null),Q=Y.exports,J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",{staticClass:"has-text-weight-bold is-size-5 has-text-centered"},[e._v(" Compras ")]),a("div",{staticClass:"buttons is-centered"},[a("b-button",{attrs:{type:"is-primary","icon-left":"cart-plus"},on:{click:e.agregar}},[e._v(" Agregar ")])],1),a("div",{staticClass:"columns is-multiline"},e._l(e.compras,(function(t){return a("div",{key:t.id,staticClass:" column is-one-quarter"},[a("span",{staticClass:"has-text-weight-bold is-size-5 has-text-centered"},[e._v(" "+e._s(t.lugar)+" ")]),a("div",{attrs:{id:t.id}},[a("b-table",{attrs:{data:t.productos,loading:e.cargando}},[a("b-table-column",{attrs:{field:"cantidad"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.cantidad)+" ")]}}],null,!0)}),a("b-table-column",{attrs:{field:"producto",label:"Producto"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.producto)+" ")]}}],null,!0)}),a("b-table-column",{scopedSlots:e._u([{key:"default",fn:function(r){return[a("b-button",{staticClass:"mb-1",on:{click:function(a){return e.quitarProductoDeLista(r.row,r.index,t.id)}}},[a("b-icon",{attrs:{icon:"check"}})],1)]}}],null,!0)})],1)],1),a("div",{staticClass:"buttons is-centered"},[a("b-button",{attrs:{type:"is-success","icon-left":"check"},on:{click:function(a){return e.marcarComprada(t)}}},[e._v(" Comprada ")]),a("b-button",{attrs:{type:"is-info","icon-left":"pencil"},on:{click:function(a){return e.editar(t)}}},[e._v(" Editar ")]),a("b-button",{attrs:{"icon-left":"printer"},on:{click:function(a){return e.imprimir(t.id)}}})],1)])})),0)])},U=[],V={obtenerCompras:function(e){return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,y.obtenerColeccionCompras();case 2:a=t.sent,r=Object(v["j"])(a),Object(v["i"])(r,e);case 5:case"end":return t.stop()}}),t)})))()},obtenerCompraPorId:function(e){return Object(f["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=v["f"],t.t1=v["d"],t.next=4,y.obtener();case 4:return t.t2=t.sent,t.t3=e,t.t4=(0,t.t1)(t.t2,"compras",t.t3),t.next=9,(0,t.t0)(t.t4);case 9:return a=t.sent,t.abrupt("return",new Promise((function(e,t){if(a.exists()){var r=a.data();r.id=a.id,e(r)}else t("No existe compra con ese ID")})));case 11:case"end":return t.stop()}}),t)})))()}},W=V,K={data:function(){return{compras:[],bd:null,cargando:!1}},mounted:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.obtener(),t.next=3,y.obtener();case 3:e.bd=t.sent;case 4:case"end":return t.stop()}}),t)})))()},methods:{agregar:function(){this.$router.push({name:"AgregarCompra"})},editar:function(e){this.$router.push({name:"EditarCompra",params:{id:e.id}})},obtener:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.cargando=!0,e.compras=[],t.next=4,W.obtenerCompras((function(t){t.docChanges().forEach((function(t){var a=t.doc.data(),r=t.doc.id;if("added"===t.type&&(a.id=r,e.compras.push(a)),"modified"===t.type){var o=e.indiceCompra(r);-1!==o&&e.$set(e.compras,o,a)}if("removed"===t.type){var n=e.indiceCompra(r);-1!==n&&e.compras.splice(n,1)}}))}));case 4:e.cargando=!1;case 5:case"end":return t.stop()}}),t)})))()},indiceCompra:function(e){return this.compras.findIndex((function(t){return t.id===e}))},marcarComprada:function(e){var t=this;this.$buefy.dialog.confirm({title:"¿Marcar como comprada?",message:"Al hacerlo la lista de productos se quitará.",confirmText:"Sí, quitar",cancelText:"Cancelar",type:"is-link",hasIcon:!0,onConfirm:function(){var a=Object(f["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.cargando=!0,a.t0=v["c"],a.t1=v["d"],a.next=5,y.obtener();case 5:return a.t2=a.sent,a.t3=e.id,a.t4=(0,a.t1)(a.t2,"compras",a.t3),a.next=10,(0,a.t0)(a.t4);case 10:t.cargando=!1;case 11:case"end":return a.stop()}}),a)})));function r(){return a.apply(this,arguments)}return r}()})},quitarProductoDeLista:function(e,t,a){var r=this;this.$buefy.dialog.confirm({title:"¿Quitar producto?",message:"¿Ya has comprado <strong>".concat(e.producto,"</strong>?"),confirmText:"Sí, quitar",cancelText:"Cancelar",type:"is-link",hasIcon:!0,onConfirm:function(){console.log("Indice: "+a);var e=r.compras,o=[];r.cargando=!0,e.forEach((function(e){e.id===a&&(e.productos.splice(t,1),o=e)})),r.compras=e,Object(v["k"])(Object(v["d"])(r.bd,"compras",a),o),r.cargando=!1}})},imprimir:function(e){var t=window.open("","PRINT","height=400,width=600");return t.document.write("<html><head><title>Print</title>"),t.document.write("</head><body >"),t.document.write("<h1> Lista compras</h1>"),t.document.write(document.getElementById(e).innerHTML),t.document.write("</body></html>"),t.document.close(),t.focus(),t.print(),t.close(),!0}}},X=K,Z=Object(c["a"])(X,J,U,!1,null,null,null),ee=Z.exports,te={components:{AgregarMovimiento:T,Categorias:P,Movimientos:Q,Compras:ee},data:function(){return{tabActiva:1}},watch:{tabActiva:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(4!==e.tabActiva){t.next=10;break}return t.prev=1,t.next=4,Object(F["d"])(Object(F["a"])());case 4:e.$buefy.toast.open("Hasta pronto"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),e.$buefy.toast.open("Error cerrando sesión: "+t.t0.message);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})))()}}},ae=te,re=Object(c["a"])(ae,b,m,!1,null,null,null),oe=re.exports,ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",{staticClass:"has-text-weight-bold is-size-5 has-text-centered"},[e._v("Agregar categorías")]),a("b-field",{attrs:{label:"Tipo","label-position":e.labelPosition}},[a("b-select",{model:{value:e.categoria.tipo,callback:function(t){e.$set(e.categoria,"tipo",t)},expression:"categoria.tipo"}},[a("option",{attrs:{value:"",selected:"",disabled:""}},[e._v("Selecciona")]),a("option",{attrs:{value:"INGRESO"}},[e._v("Ingreso")]),a("option",{attrs:{value:"EGRESO"}},[e._v("Egreso")])])],1),a("b-field",{attrs:{label:"Nombre","label-position":e.labelPosition}},[a("b-input",{attrs:{placeholder:"Nombre de la categoría"},model:{value:e.categoria.nombre,callback:function(t){e.$set(e.categoria,"nombre",t)},expression:"categoria.nombre"}})],1),a("b-field",{attrs:{label:"Periodo","label-position":e.labelPosition}},[a("b-select",{model:{value:e.categoria.periodo,callback:function(t){e.$set(e.categoria,"periodo",t)},expression:"categoria.periodo"}},[a("option",{attrs:{value:"",selected:"",disabled:""}},[e._v("Selecciona")]),a("option",{attrs:{value:"DIA"}},[e._v("Diario")]),a("option",{attrs:{value:"SEMANA"}},[e._v("Semanal")]),a("option",{attrs:{value:"MES"}},[e._v("Mensual")])])],1),e.errores.length>0?a("b-notification",{attrs:{type:"is-danger","has-icon":"","aria-close-label":"Close notification",role:"alert"}},[a("ul",e._l(e.errores,(function(t){return a("li",{key:t},[e._v(e._s(t))])})),0)]):e._e(),a("div",{staticClass:"buttons is-centered"},[a("b-button",{attrs:{type:"is-primary"},on:{click:e.guardar}},[e._v("Agregar")])],1)],1)},ie=[],se={mounted:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,y.obtenerColeccionCategorias();case 2:e.coleccionCategorias=t.sent;case 3:case"end":return t.stop()}}),t)})))()},data:function(){return{mensaje:"Welcome to Your Vue.js App",labelPosition:"on-border",errores:[],categoria:{tipo:"",nombre:"",periodo:""},categorias:[],coleccionCategorias:[],bd:null}},methods:{guardar:function(){var e=this.validarDatos();if(e){var t=Object.assign({},this.categoria);Object.assign(t,this.categoria),Object(v["a"])(this.coleccionCategorias,t),this.$buefy.toast.open("Registro correcto"),this.categoria.tipo="",this.categoria.nombre="",this.categoria.periodo=""}},validarDatos:function(){return!!(this.categoria.nombre&&this.categoria.periodo&&this.categoria.tipo)||(this.errores=[],this.categoria.nombre||this.errores.push("Debes colocar el nombre de la categoría."),this.categoria.periodo||this.errores.push("Debes colocar el periodo de la categoría."),this.categoria.tipo||this.errores.push("Debes colocar el tipo de la categoría."),!1)}}},ce=se,le=Object(c["a"])(ce,ne,ie,!1,null,null,null),ue=le.exports,de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",{staticClass:"has-text-weight-bold is-size-5 has-text-centered"},[e._v(" Agregar compra ")]),a("b-field",{attrs:{label:"Comprar en","label-position":e.labelPosition}},[a("b-input",{attrs:{placeholder:"Ej. El Iris"},model:{value:e.lugar,callback:function(t){e.lugar=t},expression:"lugar"}})],1),a("b-field",{attrs:{label:"Cantidad","label-position":e.labelPosition,width:"40"}},[a("b-numberinput",{attrs:{laceholder:"99",min:1},model:{value:e.cantidad,callback:function(t){e.cantidad=t},expression:"cantidad"}})],1),a("b-field",{attrs:{label:"Nombre del producto.","label-position":e.labelPosition,id:"nombre"}},[a("b-input",{attrs:{placeholder:"Cartulinas",type:"search"},model:{value:e.producto,callback:function(t){e.producto=t},expression:"producto"}}),a("p",{staticClass:"control"},[a("b-button",{staticClass:"button is-primary",on:{click:e.agregarProductoALista}},[e._v("Agregar")])],1)],1),a("b-table",{attrs:{data:e.productos}},[a("b-table-column",{attrs:{field:"cantidad",label:"Cantidad",numeric:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("b-numberinput",{attrs:{laceholder:"99",min:1},model:{value:t.row.cantidad,callback:function(a){e.$set(t.row,"cantidad",a)},expression:"props.row.cantidad"}})]}}])}),a("b-table-column",{attrs:{field:"producto",label:"Producto"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.producto)+" ")]}}])}),a("b-table-column",{attrs:{label:"Quitar"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("b-button",{staticClass:"mb-1",attrs:{type:"is-danger"},on:{click:function(a){return e.quitar(t.row.producto)}}},[a("b-icon",{attrs:{icon:"delete"}})],1)]}}])})],1),a("div",{staticClass:"buttons is-centered"},[a("b-button",{attrs:{type:"is-success","icon-left":"cart-plus"},on:{click:e.guardar}},[e._v(" Guardar ")])],1)],1)},pe=[],be={data:function(){return{labelPosition:"on-border",lugar:"",productos:[],producto:"",cantidad:1,coleccionCompras:[],cargando:!1}},mounted:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,y.obtenerColeccionCompras();case 2:e.coleccionCompras=t.sent;case 3:case"end":return t.stop()}}),t)})))()},methods:{guardar:function(){if(this.productos.length<1)this.$buefy.toast.open("Debes agregar productos");else{this.cargando=!0;var e={lugar:this.lugar,productos:this.productos},t=Object.assign({},e);Object.assign(t,e),Object(v["a"])(this.coleccionCompras,t),this.$buefy.toast.open("Registro correcto"),this.lugar="",this.cantidad=1,this.productos=[],this.cargando=!1}},agregarProductoALista:function(){""!==this.producto?""!==this.cantidad&&0!==this.producto?(this.productos.push({cantidad:this.cantidad,producto:this.producto}),this.producto="",this.cantidad=1,document.querySelector("#nombre").focus()):this.$buefy.toast.open("Escribe la cantidad del producto"):this.$buefy.toast.open("Escribe el nombre del producto")},quitar:function(e){for(var t=this.productos,a=0;a<t.length;a++)t[a].producto===e&&t.splice(a,1);this.productos=t}}},me=be,fe=Object(c["a"])(me,de,pe,!1,null,null,null),ge=fe.exports,he=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",{staticClass:"has-text-weight-bold is-size-5 has-text-centered"},[e._v(" Editar compra ")]),a("b-field",{attrs:{label:"Comprar en","label-position":e.labelPosition}},[a("b-input",{attrs:{placeholder:"Ej. El Iris"},model:{value:e.lugar,callback:function(t){e.lugar=t},expression:"lugar"}})],1),a("b-field",{attrs:{label:"Cantidad","label-position":e.labelPosition}},[a("b-numberinput",{attrs:{laceholder:"99",min:1},model:{value:e.cantidad,callback:function(t){e.cantidad=t},expression:"cantidad"}})],1),a("b-field",{attrs:{label:"Nombre del producto.","label-position":e.labelPosition,id:"nombre"}},[a("b-input",{attrs:{placeholder:"Cartulinas",type:"search"},model:{value:e.producto,callback:function(t){e.producto=t},expression:"producto"}}),a("p",{staticClass:"control"},[a("b-button",{staticClass:"button is-primary",on:{click:e.agregarProductoALista}},[e._v("Agregar")])],1)],1),a("b-table",{attrs:{data:e.productos,loading:e.cargando}},[a("b-table-column",{attrs:{field:"cantidad",label:"Cantidad",numeric:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("b-numberinput",{attrs:{laceholder:"99",min:1},model:{value:t.row.cantidad,callback:function(a){e.$set(t.row,"cantidad",a)},expression:"props.row.cantidad"}})]}}])}),a("b-table-column",{attrs:{field:"producto",label:"Producto"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.producto)+" ")]}}])}),a("b-table-column",{attrs:{label:"Quitar"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("b-button",{staticClass:"mb-1",attrs:{type:"is-danger"},on:{click:function(a){return e.quitar(t.row.producto)}}},[a("b-icon",{attrs:{icon:"delete"}})],1)]}}])})],1),a("div",{staticClass:"buttons is-centered"},[a("b-button",{attrs:{type:"is-success","icon-left":"cart-plus",loading:e.cargando},on:{click:e.guardar}},[e._v(" Guardar ")])],1)],1)},ve=[],we={data:function(){return{labelPosition:"on-border",lugar:"",productos:[],producto:"",cantidad:1,coleccionCompras:[],compra:[],id:"",cargando:!1}},mounted:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,W.obtenerCompraPorId(e.$route.params.id);case 2:return a=t.sent,e.cargando=!0,t.next=6,y.obtenerColeccionCompras();case 6:e.coleccionCompras=t.sent,e.lugar=a.lugar,e.productos=a.productos,e.id=a.id,e.cargando=!1;case 11:case"end":return t.stop()}}),t)})))()},methods:{guardar:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={lugar:e.lugar,productos:e.productos},r=Object.assign({},a),Object.assign(r,a),e.cargando=!0,t.t0=v["k"],t.t1=v["d"],t.next=8,y.obtener();case 8:return t.t2=t.sent,t.t3=e.id,t.t4=(0,t.t1)(t.t2,"compras",t.t3),t.t5=a,t.next=14,(0,t.t0)(t.t4,t.t5);case 14:e.$buefy.toast.open("Actualizada correctamente"),e.lugar="",e.cantidad=1,e.productos=[],e.cargando=!1;case 19:case"end":return t.stop()}}),t)})))()},agregarProductoALista:function(){""!==this.producto?""!==this.cantidad&&0!==this.producto?(this.productos.push({cantidad:this.cantidad,producto:this.producto}),this.producto="",this.cantidad=1,document.querySelector("#nombre").focus()):this.$buefy.toast.open("Escribe la cantidad del producto"):this.$buefy.toast.open("Escribe el nombre del producto")},quitar:function(e){for(var t=this.productos,a=0;a<t.length;a++)t[a].producto===e&&t.splice(a,1);this.productos=t}}},_e=we,xe=Object(c["a"])(_e,he,ve,!1,null,null,null),Ce=xe.exports,ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"section"},[a("div",{staticClass:"columns"},[a("div",{staticClass:"column"},[a("b-field",{attrs:{label:"Correo"}},[a("b-input",{attrs:{type:"email",placeholder:"tu@correo.aquí",loading:e.cargando},model:{value:e.correo,callback:function(t){e.correo=t},expression:"correo"}})],1),a("b-field",{attrs:{label:"Contraseña"}},[a("b-input",{attrs:{type:"password",placeholder:"Tu contraseña",loading:e.cargando},model:{value:e.palabraSecreta,callback:function(t){e.palabraSecreta=t},expression:"palabraSecreta"}})],1),a("b-button",{staticClass:"is-success",attrs:{loading:e.cargando},on:{click:function(t){return e.iniciarSesion()}}},[e._v("Iniciar sesión")])],1)])])},Oe=[],ke=(a("caad"),a("2532"),a("ea7b")),je=a("2a56"),Se=a.n(je),Re={data:function(){return{correo:"",palabraSecreta:"",cargando:!1,Pinto:Se.a}},methods:{iniciarSesion:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.correo&&e.palabraSecreta){t.next=3;break}return e.$buefy.toast.open("Completa los campos"),t.abrupt("return");case 3:if(e.correo.includes("@")){t.next=6;break}return e.$buefy.toast.open("Escribe un correo válido"),t.abrupt("return");case 6:return e.cargando=!0,y.obtener(),a=Object(ke["a"])(),t.prev=9,t.next=12,Object(ke["c"])(a,e.correo,e.palabraSecreta);case 12:e.$buefy.toast.open("Bienvenido"),t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](9),e.$buefy.dialog.alert({title:"Error",message:"Error iniciando sesión. Verifica tu correo y contraseña. El error es: "+t.t0.message,type:"is-danger",hasIcon:!0,icon:"alert"});case 18:return t.prev=18,e.cargando=!1,t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[9,15,18,21]])})))()}}},Ee=Re,Pe=Object(c["a"])(Ee,ye,Oe,!1,null,null,null),Ie=Pe.exports;r["a"].use(p["a"]);var Ae=new p["a"]({routes:[{path:"/",name:"Tabs",component:oe},{path:"/agregar-categoria",name:"AgregarCategoria",component:ue},{path:"/categorias",name:"Categorias",component:P},{path:"/agregar-compra",name:"AgregarCompra",component:ge},{path:"/editar-compra/:id",name:"EditarCompra",component:Ce},{path:"/login",name:"Login",component:Ie}]});y.obtener(),Object(ke["b"])(Object(ke["a"])(),(function(e){e?Ae.push({name:"Tabs"}):"Login"!==Ae.currentRoute.name&&Ae.push({name:"Login"})})),Ae.beforeEach((function(e,t,a){var r=Object(ke["a"])().currentUser;r||"Login"===e.name?a():a({name:"Login"})}));var $e=Ae;r["a"].use(d["a"]),r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(u)},router:$e}).$mount("#app")},"85ec":function(e,t,a){}});